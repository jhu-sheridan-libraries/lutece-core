<@row>
	<@columns>
    	<@box>
			<#assign title>#i18n{portal.site.admin_page.tabAdminMapSite} : [${page.id}] ${page.name}</#assign>
			<@boxHeader title=title boxTools=true>
				<@tform method='post' action='jsp/admin/site/AdminSite.jsp' type='inline' align='right' role='search'>
					<@formGroup formStyle='inline' labelKey='#i18n{portal.site.admin_page.buttonSearchPage}' hideLabel=['all']>
						<@inputGroup size='sm'>
							<@input type='text' id='tree_search' name='' placeHolder='#i18n{portal.site.admin_page.buttonSearchPage}' />
							<@inputGroupItem>
								<@button id='btn-tree_search' color='link' type='button' title='#i18n{portal.site.admin_page.buttonSearchPage}' buttonIcon='search' hideTitle=['all'] />
							</@inputGroupItem>
						</@inputGroup>
					</@formGroup>
				</@tform>
			</@boxHeader>
			<@boxBody class='sitemap'>
				<@row>
					<@columns md=6>
						<@link class='btn btn-link text-black' href='jsp/admin/site/AdminSite.jsp?page_id=1'>
							<@icon style='home' /> #i18n{portal.site.page_home.label}
						</@link>
						${map_site}
					</@columns>
					<@columns md=6>
						<div id="event_result"></div>
					</@columns>
				</@row>
			</@boxBody>
    	</@box>
	</@columns>
</@row>
<link rel="stylesheet" href="js/admin/lib/jstree/themes/proton/style.min.css" >
<script src="js/admin/lib/jstree/jstree.min.js"></script>
<script>
$(function(){
	$('#tree').jstree({
		'core': {
			'multiple' : false,
            'themes': {
                'name': 'proton',
                'responsive': true
            }
        },
		'state' : { 'jstree_select' : '#node-${page.id}' },
	 	'plugins' : [ 'state', 'search','wholerow' ]
	}).on("click", ".jstree-anchor", function() {
		document.location.href = this.href;
	});

	var to = false;
	$('#tree_search').keyup(function () {
		if(to) { clearTimeout(to); }
		to = setTimeout(function () {
		var v = $('#tree_search').val();
		$('#tree').jstree(true).search(v);
		}, 250);
	});
});
</script>
